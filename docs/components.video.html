<!DOCTYPE html>

<html>
<head>
  <title>components.video.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="components.360.html">
                components.360.js
              </a>
            
              
              <a class="source" href="components.carousel.html">
                components.carousel.js
              </a>
            
              
              <a class="source" href="components.easy.html">
                components.easy.js
              </a>
            
              
              <a class="source" href="components.fade.html">
                components.fade.js
              </a>
            
              
              <a class="source" href="components.fade2.html">
                components.fade2.js
              </a>
            
              
              <a class="source" href="components.menu.html">
                components.menu.js
              </a>
            
              
              <a class="source" href="components.pan.html">
                components.pan.js
              </a>
            
              
              <a class="source" href="components.pan2.html">
                components.pan2.js
              </a>
            
              
              <a class="source" href="components.pan3.html">
                components.pan3.js
              </a>
            
              
              <a class="source" href="components.panold.html">
                components.panold.js
              </a>
            
              
              <a class="source" href="components.sound.html">
                components.sound.js
              </a>
            
              
              <a class="source" href="components.video.html">
                components.video.js
              </a>
            
              
              <a class="source" href="components.video2.html">
                components.video2.js
              </a>
            
              
              <a class="source" href="main.html">
                main.js
              </a>
            
              
              <a class="source" href="mixins.preloader.html">
                mixins.preloader.js
              </a>
            
              
              <a class="source" href="mixins.sound.html">
                mixins.sound.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>components.video.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>define([<span class="hljs-string">'jquery'</span>, <span class="hljs-string">'mixins.preloader'</span>, <span class="hljs-string">'mixins.sound'</span>, <span class="hljs-string">'mediaelement'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($, MixinPreloader, MixinSound)</span> {</span>

	<span class="hljs-keyword">var</span> console = window.console;

	<span class="hljs-keyword">var</span> Component = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(element, options)</span> {</span>

		<span class="hljs-keyword">this</span>.$el = $(element);

		<span class="hljs-keyword">this</span>.elementId = <span class="hljs-keyword">this</span>.$el.attr(<span class="hljs-string">'id'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Default options for the plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.defaults = {
			autoplay: <span class="hljs-literal">true</span>,
			interactive: <span class="hljs-literal">false</span>,
			controls: <span class="hljs-literal">false</span>,
			preload: <span class="hljs-string">'none'</span>,
			sound: <span class="hljs-literal">null</span>,
			techOrder: [<span class="hljs-string">"html5"</span>, <span class="hljs-string">"flash"</span>]
		};</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>merge default options with</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.options = $.extend(<span class="hljs-keyword">this</span>.defaults, options);
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>MIXIN</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	$.extend(Component.prototype, MixinPreloader);
	$.extend(Component.prototype, MixinSound);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>extend prototype</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	$.extend(Component.prototype, {



		initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>


			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.initialized) {
				console.warn(<span class="hljs-keyword">this</span>.elementId + <span class="hljs-string">' Component already initialized exit'</span>);
				<span class="hljs-keyword">return</span>;
			}
			<span class="hljs-keyword">this</span>.initialized = <span class="hljs-literal">true</span>;


			<span class="hljs-keyword">this</span>.video = <span class="hljs-keyword">this</span>.options.id; <span class="hljs-comment">//this.$el.find('.video-js').get(0);</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>if the video has no id return </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.options.id) {
				<span class="hljs-keyword">return</span>;
			}

			console.info(<span class="hljs-keyword">this</span>.options.id + <span class="hljs-string">' ComponentVideo initialize'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>if interactive set autoplay at false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.interactive) {
				<span class="hljs-keyword">this</span>.options.autoplay = <span class="hljs-literal">false</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>toggle visibility</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> playerStyle = <span class="hljs-string">'hide'</span>;

			<span class="hljs-keyword">var</span> videoOptions = {
				alwaysShowControls: <span class="hljs-literal">true</span>,
				iPadUseNativeControls: <span class="hljs-literal">false</span>,
				iPhoneUseNativeControls: <span class="hljs-literal">false</span>,
				AndroidUseNativeControls: <span class="hljs-literal">false</span>,
				isVideo: <span class="hljs-literal">true</span>
			};

			<span class="hljs-keyword">this</span>.removePoster();</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>this.plugin = window.MediaElementPlayer(“#” + this.options.id, videoOptions);
this.plugin.stop();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
			<span class="hljs-keyword">var</span> isSafari = <span class="hljs-regexp">/Safari/</span>.test(navigator.userAgent) &amp;&amp; <span class="hljs-regexp">/Apple Computer/</span>.test(navigator.vendor);


			<span class="hljs-keyword">this</span>.plugin = document.getElementById(<span class="hljs-keyword">this</span>.options.id);
			<span class="hljs-keyword">this</span>.plugin.load();

			<span class="hljs-keyword">this</span>.$plugin = $(<span class="hljs-string">".videoWrapper"</span>);

			<span class="hljs-keyword">this</span>.createPoster();


			<span class="hljs-keyword">if</span> (isSafari) {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>this.plugin.removeAttribute(‘autoplay’);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.plugin.preload = <span class="hljs-literal">true</span>;

			}

			<span class="hljs-keyword">this</span>.checkInteract();


		},


		createPoster: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-comment">/*
			this.posterObj = $('&lt;div class="posterImg"&gt;&lt;img  src="' + this.plugin.poster + '"/&gt;&lt;/div&gt;');
			this.posterObj.appendTo(this.$el);
			this.$plugin.hide();
			*/</span>

		},

		removePoster: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-comment">/*
			if (this.posterObj) {
				this.posterObj.hide();
				this.posterObj.fadeTo(.1, 0);
				this.posterObj.empty().remove();
				delete this.posterObj;
			}
			if (this.$plugin) {
				this.$plugin.show();
			}*/</span>

		},</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>video click interactivity</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		checkInteract: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-keyword">this</span>.$el.off();
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.interactive) {
				<span class="hljs-keyword">this</span>.$el.on(<span class="hljs-string">"click"</span>, $.proxy(<span class="hljs-keyword">this</span>.toggleVideoPlayback, <span class="hljs-keyword">this</span>));
				<span class="hljs-keyword">this</span>.$el.addClass(<span class="hljs-string">'interactive'</span>);
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.plugin.play();
			}

		},</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>toggle the video playstate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		toggleVideoPlayback: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>



			console.info(<span class="hljs-keyword">this</span>.elementId + <span class="hljs-string">" toggle clip"</span>);

			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.plugin || !<span class="hljs-keyword">this</span>.isPlayable()) {
				console.error(<span class="hljs-keyword">this</span>.elementId + <span class="hljs-string">" ComponentVideo clicking a video not inited"</span>, <span class="hljs-keyword">this</span>.isPlayable());
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>.removePoster();

			console.debug(<span class="hljs-keyword">this</span>.elementId + <span class="hljs-string">" ComponentVideo toggleVideoPlayback"</span>);

			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isPaused()) {
				<span class="hljs-keyword">this</span>.stop();
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.play();
			}

		},</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>HAVE_NOTHING (numeric value 0)
No information regarding the media resource is available. No data for the current playback position is available. Media elements whose networkState attribute are set to NETWORK_EMPTY are always in the HAVE_NOTHING state.</p>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>HAVE_METADATA (numeric value 1)
Enough of the resource has been obtained that the duration of the resource is available. In the case of a video element, the dimensions of the video are also available. The API will no longer throw an exception when seeking. No media data is available for the immediate current playback position.</p>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>HAVE_CURRENT_DATA (numeric value 2)
Data for the immediate current playback position is available, but either not enough data is available that the user agent could successfully advance the current playback position in the direction of playback at all without immediately reverting to the HAVE_METADATA state, or there is no more data to obtain in the direction of playback. For example, in video this corresponds to the user agent having data from the current frame, but not the next frame, when the current playback position is at the end of the current frame; and to when playback has ended.</p>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>HAVE_FUTURE_DATA (numeric value 3)
Data for the immediate current playback position is available, as well as enough data for the user agent to advance the current playback position in the direction of playback at least a little without immediately reverting to the HAVE_METADATA state, and the text tracks are ready. For example, in video this corresponds to the user agent having data for at least the current frame and the next frame when the current playback position is at the instant in time between the two frames, or to the user agent having the video data for the current frame and audio data to keep playing at least a little when the current playback position is in the middle of a frame. The user agent cannot be in this state if playback has ended, as the current playback position can never advance in this case.</p>

            </div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>HAVE_ENOUGH_DATA (numeric value 4)</p>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>NETWORK_EMPTY (numeric value 0)
The element has not yet been initialized. All attributes are in their initial states.
NETWORK_IDLE (numeric value 1)
The element’s resource selection algorithm is active and has selected a resource, but it is not actually using the network at this time.
NETWORK_LOADING (numeric value 2)
The user agent is actively trying to download data.
NETWORK_NO_SOURCE (numeric value 3)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

		getPlayState: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> netState = -<span class="hljs-number">1</span>;
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.plugin) {
				console.debug(<span class="hljs-keyword">this</span>.plugin);
				netState = <span class="hljs-keyword">this</span>.plugin.networkState;
			}
			console.error(<span class="hljs-string">'getPlayState'</span>, netState);
			<span class="hljs-keyword">return</span> netState;
		},


		isPaused: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-keyword">var</span> isPaused = <span class="hljs-literal">true</span>;

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.plugin) {

				<span class="hljs-keyword">try</span> {

					isPaused = <span class="hljs-keyword">this</span>.plugin.paused;

				} <span class="hljs-keyword">catch</span> (e) {
					console.error(<span class="hljs-string">'ComponentVideo cannot detect if paused'</span>);
					console.error(e);
				}
			}

			console.error(<span class="hljs-string">'isPaused'</span>, isPaused);
			<span class="hljs-keyword">return</span> isPaused;

		},



		isPlayable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> isPlayable = <span class="hljs-literal">false</span>;

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.plugin) {
				console.debug(<span class="hljs-string">'this.plugin.readyState'</span>, <span class="hljs-keyword">this</span>.plugin.readyState);
				isPlayable = (<span class="hljs-keyword">this</span>.plugin.readyState === <span class="hljs-number">4</span>);
			}
			console.error(<span class="hljs-string">'isPlayable'</span>, isPlayable);
			<span class="hljs-keyword">return</span> isPlayable;
		},



		play: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.plugin) {

			}

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.plugin) {
				console.error(<span class="hljs-string">'play'</span>);
				<span class="hljs-keyword">this</span>.plugin.play();
			}
		},


		stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>


			<span class="hljs-keyword">try</span> {

				console.error(<span class="hljs-string">'stop'</span>);

				<span class="hljs-keyword">this</span>.plugin.pause();
				<span class="hljs-keyword">this</span>.resetPlayback();

			} <span class="hljs-keyword">catch</span> (e) {
				console.error(<span class="hljs-string">'ComponentVideo errors resetting Video Instance'</span>);
				console.error(e);
			}
		},



		resetPlayback: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> isResetted = <span class="hljs-literal">false</span>;


			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.plugin) {

				<span class="hljs-keyword">this</span>.plugin.currentTime = <span class="hljs-number">0</span>;
				console.error(<span class="hljs-string">'this.plugin.currentTime'</span>, <span class="hljs-keyword">this</span>.plugin.currentTime);
				isResetted = (<span class="hljs-keyword">this</span>.plugin.currentTime === <span class="hljs-number">0</span>);

				console.error(<span class="hljs-string">'this.plugin.currentTime'</span>, <span class="hljs-keyword">this</span>.plugin.currentTime);

			}

			<span class="hljs-comment">/*
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>this part is not working</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
			<span class="hljs-keyword">if</span> (!isResetted) {
				console.error(<span class="hljs-string">'reinstance videojs'</span>);
				<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>instance the videojs object
when ready add interactivity</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
				if (this.plugin) {
					this.plugin.dispose();
					this.plugin = null;
				}


				this.$el.find('#' + this.options.id).empty().remove();
				delete this.$el.find('#' + this.options.id);

				var $newVideo = $(this.originalVideo);

				$($newVideo).appendTo(this.$el.find('.videoWrapper'));
				console.debug(this.$el.html());



			}*/

		},



		dispose: function() {

			if (!this.initialized) {
				console.warn(this.elementId + ' ComponentVideo not initialized no dispose');
				return;
			}



			console.info(this.options.id + ' ComponentVideo dispose');

			if (this.plugin) {

				this.disposeSound();

				this.stop();

				this.plugin.controlBar.hide();

			}

			this.$el.off();


			this.posterObj.remove();
			delete this.posterObj;</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>rimuoviamo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$el;
			<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$plugin;
			<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.plugin;

		}



	});


	<span class="hljs-keyword">return</span> Component;

});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
