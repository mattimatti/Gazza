!function(){var a=function(a,b){this.$el=$(a),this.defaults={images:null,cursor:"default",draggable:!1},this.options=$.extend(this.defaults,b)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{initialize:function(){this.options.interactive&&(this.options.cursor="pointer",this.options.draggable=!0),this.plugin=this.$el.find(".component"),this.plugin.attr("width",this.plugin.width()),this.plugin.attr("height",this.plugin.height()),console.debug("instance reel with options",this.options),this.plugin.reel(this.options)},dispose:function(){this.plugin&&this.plugin.unreel()}}),window.ComponentReel=a}(),function(){var a=function(a,b){this.$el=$(a),this.elementId=this.$el.attr("id"),this.defaults={loop:!0,delay:.5,duration:1,sound:null},this.options=$.extend(this.defaults,b)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{transitioning:!1,frontVisible:!0,imageIndex:-1,sound:null,initialize:function(){if(this.initSound(),this.plugin=this.$el.find(".component"),this.items=this.$el.find(".item"),this.itemsCount=this.items.length,console.debug("this.itemsCount",this.itemsCount),0===this.itemsCount)return void console.error("carousel must have at least one item");console.error(this.elementId+": Carousel initialize");var a=$(this.items.get(0));a.css("width",a.width()),a.css("height",a.height()),this.plugin.css("width",$(this.items.get(0)).width()),this.plugin.css("height",$(this.items.get(0)).height()),this.prepareItems(),this.options.interactive&&(this.options.loop=!1),this.options.interactive&&(this.$el.on("click",$.proxy(this.clickComponent,this)),this.$el.addClass("interactive")),this.options.loop&&(this.setupNextPair(),this.showNext())},prepareItems:function(){console.debug(this.elementId+":prepareItems"),this.items||(this.items=this.$el.find(".item")),this.items.hide();var a=this;this.items.each(function(b,c){var d=$(c);d.css("position","absolute"),d.css("top",0),d.css("left",0),d.css("zIndex",a.items.length-1-b),d.css("height",a.plugin.height()),d.css("width",a.plugin.width()),console.debug("index",b,d.css("zIndex"))}),$(this.items.get(0)).show().fadeTo(0,1).css("zIndex",1001)},setupNextPair:function(){console.debug(this.elementId+":setupNextPair"),this.imageIndex+1>=this.itemsCount&&(this.imageIndex=-1),this.imageIndex++;var a=this.imageIndex,b=this.imageIndex+1;b>=this.itemsCount&&(b=0),console.debug("will transition from ",a," to ",b),this.front=$(this.items.get(a)),this.back=$(this.items.get(b)),this.items.hide()},clickComponent:function(){this.transitioning||(console.debug(this.elementId+":clickComponent",this.frontVisible),this.setupNextPair(),this.showNext(),this.sound.playSound("click"))},showNext:function(){console.debug(this.elementId+": showNext",this.frontVisible,"duration",this.options.duration),this.disposeTransitions(),this.front.show().css("zIndex",1001),this.back.show().css("zIndex",1e3),this.transitioning=!0,TweenMax.to(this.front,this.options.duration,{alpha:0,delay:this.options.delay}),TweenMax.to(this.back,this.options.duration,{delay:this.options.delay,alpha:1,onComplete:$.proxy(this.onNextVisible,this)})},onNextVisible:function(){this.frontVisible=!1,console.debug(this.elementId+":onNextVisible frontVisible?",this.frontVisible),this.transitioning=!1,this.options.loop&&(this.setupNextPair(),this.showNext())},disposeTransitions:function(){TweenMax.killTweensOf(this.front),TweenMax.killTweensOf(this.back)},stopLooping:function(){this.options.loop&&(this.options.loop=!1)},initSound:function(){this.sound=new window.ComponentSound,this.options.sound&&this.sound.registerSoundFullPath(this.options.sound)},disposeSound:function(){this.sound&&(this.sound.removeAllSounds(),delete this.sound)},dispose:function(){this.plugin&&(console.error(this.elementId+": Carousel dispose"),this.$el.off(),this.stopLooping(),this.disposeTransitions(),this.prepareItems(),this.imageIndex=-1,this.transitioning=!1)}}),window.ComponentCarousel=a}(),function(){var a=function(a,b){this.$el=$(a),this.defaults={mode:"fade",pager:!1,controls:!1,responsive:!0,auto:!0},this.options=$.extend(this.defaults,b)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{initialize:function(){this.options.interactive&&(this.options.auto=!1,delete this.options.interactive),delete this.options.sound,delete this.options.duration,console.debug("instance bxSlider with options",this.options);this.$el.attr("id");this.plugin=$(".bxslider").bxSlider(this.options)},dispose:function(){this.plugin}}),window.ComponentCarousel=a}(),function(){var a=function(a,b){this.options=b,this.$el=$(a)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{initialize:function(){console.debug("ComponentEasy initialize")},dispose:function(){}}),window.ComponentEasy=a}(),function(){var a=function(a,b){this.$el=$(a),this.defaults={loop:!0,delay:0,duration:2,sound:null},this.options=$.extend(this.defaults,b)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{transitioning:!1,frontVisible:!0,initialize:function(){this.plugin=this.$el.find(".component"),this.plugin&&(console.debug("ComponentFade initialize"),this.initSound(),this.front=this.$el.find(".front").show(),this.back=this.$el.find(".back").show(),this.front.attr("width",this.front.width()),this.front.attr("height",this.front.height()),this.plugin.css("width",this.front.width()),this.plugin.css("height",this.front.height()),this.front.css("position","absolute"),this.front.css("top",0),this.front.css("left",0),this.front.css("height",this.plugin.height()),this.front.css("width",this.plugin.width()),this.back.css("position","absolute"),this.back.css("top",0),this.back.css("left",0),this.back.css("height",this.plugin.height()),this.back.css("width",this.plugin.width()),this.options.interactive&&(this.options.loop=!1),this.options.interactive&&(this.options.duration/=2,this.plugin.on("click",$.proxy(this.clickComponent,this)),this.plugin.addClass("interactive"),this.initSound()),this.options.loop&&this.toggleImage())},clickComponent:function(){console.debug("clickComponent"),this.transitioning||(this.sound.playSound("click"),this.toggleImage())},toggleImage:function(){console.debug("toggleImage",this.frontVisible),this.frontVisible?this.showBack():this.showFront()},showBack:function(){var a=this;TweenMax.killTweensOf(this.front),TweenMax.killTweensOf(this.back),a.transitioning=!0,TweenMax.to(this.front,this.options.duration,{alpha:0}),TweenMax.to(this.back,this.options.duration,{delay:this.options.delay,alpha:1,onComplete:function(){a.frontVisible=!1,a.transitioning=!1,a.options.loop&&a.toggleImage()}})},showFront:function(){var a=this;this.transitioning=!0,TweenMax.killTweensOf(this.front),TweenMax.killTweensOf(this.back),TweenMax.to(this.front,this.options.duration,{alpha:1}),TweenMax.to(this.back,this.options.duration,{delay:this.options.delay,alpha:0,onComplete:function(){a.frontVisible=!0,a.transitioning=!1,a.options.loop&&a.toggleImage()}})},stopLooping:function(){this.options&&(this.options.loop=!1)},initSound:function(){console.debug("initSound",this.options.sound),this.sound=new window.ComponentSound,this.options.sound&&this.sound.registerSoundFullPath(this.options.sound)},disposeSound:function(){this.sound&&(this.sound.removeAllSounds(),delete this.sound)},dispose:function(){this.disposeSound(),this.$el.off(),this.stopLooping(),this.frontVisible||(this.showFront(),this.back.hide())}}),window.ComponentFade=a}(),function(){var a=function(a,b){console.debug("constructor",arguments),this.options=b,this.$el=a};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{initialize:function(){console.debug("initialize",arguments)},dispose:function(){console.debug("dispose")}}),window.ComponentMenu=a}(),function(){var a=function(a,b){this.$el=$(a),this.defaults={minScale:0,hqSrc:null,maxZoom:1},this.options=$.extend(this.defaults,b)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{zoomIn:!1,originalImage:null,hqImage:null,initialize:function(){if(this.plugin=this.$el.find(".component"),this.plugin){console.debug("initialize",arguments),this.initSound();var a=$("<div class='pancontainer'></div>");a.attr("width",this.plugin.width()),a.attr("height",this.plugin.height()),a.css("width",this.plugin.width()),a.css("height",this.plugin.height()),this.plugin.wrap(a),this.originalimage=this.plugin.attr("src"),console.debug("original",this.originalimage),this.hqImage=this.options.hqSrc?this.options.hqSrc:this.originalimage,this.plugin.on("dblclick",$.proxy(this.clickComponent,this)),this.plugin.addClass("interactive"),console.debug("Instance plugin  panzoom with options",this.options),this.plugin.panzoom({})}},clickComponent:function(){console.debug("clickComponent"),this.sound.playSound("click"),this.toggleZoom()},swapSource:function(a){this.plugin.attr("src",a)},toggleZoom:function(){console.debug("toggleZoom this.zoomIn",this.zoomIn),this.zoomIn?(this.plugin.panzoom("reset"),this.zoomIn=!1,this.swapSource(this.originalimage)):(this.swapSource(this.hqImage),this.plugin.panzoom("zoom",this.options.maxZoom,{animate:!0}),this.zoomIn=!0)},initSound:function(){this.sound=new window.ComponentSound,this.options.sound&&this.sound.registerSoundFullPath(this.options.sound)},disposeSound:function(){this.sound&&(this.sound.removeAllSounds(),delete this.sound)},dispose:function(){this.disposeSound(),this.plugin&&(this.plugin.panzoom("reset"),this.zoomIn=!1,this.swapSource(this.originalimage),this.plugin.off(),this.plugin.panzoom("destroy"),this.plugin.unwrap())}}),window.ComponentPan=a}();var instancesPool=[],preloadAssets=function(){},Modules={"image-fade":{preload:function(a,b){var c=new window.ComponentFade(a,b);c.preload(),instancesPool[a.id]=c},init:function(a){instancesPool[a.id]&&instancesPool[a.id].initialize()},remove:function(a){instancesPool[a.id]&&instancesPool[a.id].dispose()}},"image-360":{preload:function(a,b){var c=new window.ComponentReel(a,b);c.preload(),instancesPool[a.id]=c},init:function(a){instancesPool[a.id]&&instancesPool[a.id].initialize()},remove:function(a){instancesPool[a.id]&&instancesPool[a.id].dispose()}},"video-clip":{preload:function(a,b){var c=new window.ComponentVideo(a,b);c.preload(),instancesPool[a.id]=c},init:function(a){instancesPool[a.id]&&instancesPool[a.id].initialize()},remove:function(a){instancesPool[a.id]&&instancesPool[a.id].dispose()}},"image-easy":{preload:function(a,b){var c=new window.ComponentEasy(a,b);c.preload(),instancesPool[a.id]=c},init:function(a){instancesPool[a.id]&&instancesPool[a.id].initialize()},remove:function(a){instancesPool[a.id]&&instancesPool[a.id].dispose()}},"image-pan":{preload:function(a,b){var c=new window.ComponentPan(a,b);c.preload(),instancesPool[a.id]=c},init:function(a){instancesPool[a.id]&&instancesPool[a.id].initialize()},remove:function(a){instancesPool[a.id]&&instancesPool[a.id].dispose()}},carousel:{preload:function(a,b){if(!instancesPool[a.id]){var c=new window.ComponentCarousel(a,b);c.preload(),instancesPool[a.id]=c}},init:function(a){instancesPool[a.id]&&instancesPool[a.id].initialize()},remove:function(a){instancesPool[a.id]&&(instancesPool[a.id].dispose(),delete instancesPool[a.id])}}};$(".box").attr("data-emit-events","data-emit-events"),$(".box").attr("data-top-bottom","").attr("data-bottom-top",""),skrollr.init({forceHeight:!0,keyframe:function(a,b,c){console.log(b,c);var d=Modules[a.getAttribute("obj-type")],e=a.getAttribute("obj-config");if(e=$.parseJSON(e),"down"===c)switch(b){case"dataTopBottom":console.log("REMOVE",a.id),d.remove(a,e);break;case"dataBottomTop":console.log("INIT",a.id),d.preload(a,e),d.init(a,e)}else switch(b){case"dataTopBottom":console.log("INIT",a.id),d.preload(a,e),d.init(a,e);break;case"dataBottomTop":console.log("REMOVE",a.id),d.remove(a,e)}}}),function(){var a="click",b=function(a){a||(a={}),this.defaults={audioPath:"sounds/"},this.options=$.extend(this.defaults,a),this.initialize()};$.extend(b.prototype,{initialize:function(){createjs.Sound.alternateExtensions=["mp3"]},registerSoundFullPath:function(b,c){c||(c=a),console.debug("registerSoundFullPath",b,c),createjs.Sound.registerSound(b,c)},registerSoundById:function(a,b){var c,d=this.options.audioPath;b&&(d=b),c=d+a+".ogg",createjs.Sound.registerSound(c,a)},playSound:function(b){b||(b=a),createjs.Sound.initializeDefaultPlugins()&&createjs.Sound.play(b)},stopSound:function(){createjs.Sound.stop()},removeAllSounds:function(){if(createjs.Sound)try{createjs.Sound.removeAllSounds()}catch(a){}}}),window.ComponentSound=b}(),function(){var a=function(a,b){this.$el=$(a),this.defaults={autoplay:!0,interactive:!1,controls:!1,preload:"none",sound:null},this.options=$.extend(this.defaults,b)};$.extend(a.prototype,window.MixinPreloader),$.extend(a.prototype,{initialize:function(){this.video=this.options.id,console.debug("video initialize",this.options.id),this.options.id&&(this.options.interactive&&(this.options.autoplay=!1),this.plugin=videojs(this.options.id,this.options).ready($.proxy(this.checkInteract,this)))},checkInteract:function(){this.options.interactive?(this.$el.on("click",$.proxy(this.toggleVideoPlayback,this)),this.$el.addClass("interactive"),console.log("VID")):this.plugin.play()},toggleVideoPlayback:function(){this.plugin||console.error("clicking a video not inited"),this.initSound(),this.sound.playSound("click");var a=!0;try{a=this.plugin.paused()}catch(b){}console.debug("toggleVideoPlayback",this.plugin,this.plugin.paused()),a?this.plugin.play():this.plugin.pause()},initSound:function(){this.sound=new window.ComponentSound,this.options.sound&&this.sound.registerSoundFullPath(this.options.sound)},disposeSound:function(){this.sound&&(this.sound.removeAllSounds(),delete this.sound)},dispose:function(){if(this.plugin){this.disposeSound(),console.log("--->",this.plugin);try{this.plugin.pause(),this.plugin.currentTime(0),this.plugin.controlBar.hide(),this.plugin.controls(!1),this.$el.off()}catch(a){}}delete this.$el,delete this.plugin}}),window.ComponentVideo=a}(),function(){var a={preloaded:!1,preload:function(){return this.$el?this.preloaded?void this.initialize():(this.$el.find("*").each($.proxy(this.eachImage,this)),void(this.preloaded=!0)):void console.error("This component has no el")},eachImage:function(a,b){var c=$(b);c.attr("data-src")&&""!==c.attr("data-src")&&this.preloadElement(c)},preloadElement:function(a){console.error("preloadElement",a),a.attr("src",a.attr("data-src"));console.error("load Ajax",a.attr("data-src"))},loadedElement:function(){console.error("loadedElement",arguments)},stopPreload:function(){console.error("stopPreload",arguments)}};window.MixinPreloader=a}(),function(a,b,c){"use strict";function d(c){if(e=b.documentElement,f=b.body,S(),gb=this,c=c||{},lb=c.constants||{},c.easing)for(var d in c.easing)V[d]=c.easing[d];sb=c.edgeStrategy||"set",jb={beforerender:c.beforerender,render:c.render,keyframe:c.keyframe},kb=c.forceHeight!==!1,kb&&(Jb=c.scale||1),mb=c.mobileDeceleration||y,ob=c.smoothScrolling!==!1,pb=c.smoothScrollingDuration||z,qb={targetTop:gb.getScrollTop()},Rb=(c.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||a.opera)})(),Rb?(ib=b.getElementById("skrollr-body"),ib&&fb(),W(),Db(e,[s,v],[t])):Db(e,[s,u],[t]),gb.refresh(),vb(a,"resize orientationchange",function(){var a=e.clientWidth,b=e.clientHeight;(b!==Ob||a!==Nb)&&(Ob=b,Nb=a,Pb=!0)});var g=T();return function h(){Z(),ub=g(h)}(),gb}var e,f,g={get:function(){return gb},init:function(a){return gb||new d(a)},VERSION:"0.6.25"},h=Object.prototype.hasOwnProperty,i=a.Math,j=a.getComputedStyle,k="touchstart",l="touchmove",m="touchcancel",n="touchend",o="skrollable",p=o+"-before",q=o+"-between",r=o+"-after",s="skrollr",t="no-"+s,u=s+"-desktop",v=s+"-mobile",w="linear",x=1e3,y=.004,z=200,A="start",B="end",C="center",D="bottom",E="___skrollable_id",F=/^(?:input|textarea|button|select)$/i,G=/^\s+|\s+$/g,H=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,I=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,J=/^([a-z\-]+)\[(\w+)\]$/,K=/-([a-z0-9_])/g,L=function(a,b){return b.toUpperCase()},M=/[\-+]?[\d]*\.?[\d]+/g,N=/\{\?\}/g,O=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,P=/[a-z\-]+-gradient/g,Q="",R="",S=function(){var a=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(j){var b=j(f,null);for(var d in b)if(Q=d.match(a)||+d==d&&b[d].match(a))break;if(!Q)return Q=R="",c;Q=Q[0],"-"===Q.slice(0,1)?(R=Q,Q={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[Q]):R="-"+Q.toLowerCase()+"-"}},T=function(){var b=a.requestAnimationFrame||a[Q.toLowerCase()+"RequestAnimationFrame"],c=Gb();return(Rb||!b)&&(b=function(b){var d=Gb()-c,e=i.max(0,1e3/60-d);return a.setTimeout(function(){c=Gb(),b()},e)}),b},U=function(){var b=a.cancelAnimationFrame||a[Q.toLowerCase()+"CancelAnimationFrame"];return(Rb||!b)&&(b=function(b){return a.clearTimeout(b)}),b},V={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-i.cos(a*i.PI)/2+.5},sqrt:function(a){return i.sqrt(a)},outCubic:function(a){return i.pow(a-1,3)+1},bounce:function(a){var b;if(.5083>=a)b=3;else if(.8489>=a)b=9;else if(.96208>=a)b=27;else{if(!(.99981>=a))return 1;b=91}return 1-i.abs(3*i.cos(1.028*a*b)/b)}};d.prototype.refresh=function(a){var d,e,f=!1;for(a===c?(f=!0,hb=[],Qb=0,a=b.getElementsByTagName("*")):a.length===c&&(a=[a]),d=0,e=a.length;e>d;d++){var g=a[d],h=g,i=[],j=ob,k=sb,l=!1;if(f&&E in g&&delete g[E],g.attributes){for(var m=0,n=g.attributes.length;n>m;m++){var p=g.attributes[m];if("data-anchor-target"!==p.name)if("data-smooth-scrolling"!==p.name)if("data-edge-strategy"!==p.name)if("data-emit-events"!==p.name){var q=p.name.match(H);if(null!==q){var r={props:p.value,element:g,eventType:p.name.replace(K,L)};i.push(r);var s=q[1];s&&(r.constant=s.substr(1));var t=q[2];/p$/.test(t)?(r.isPercentage=!0,r.offset=(0|t.slice(0,-1))/100):r.offset=0|t;var u=q[3],v=q[4]||u;u&&u!==A&&u!==B?(r.mode="relative",r.anchors=[u,v]):(r.mode="absolute",u===B?r.isEnd=!0:r.isPercentage||(r.offset=r.offset*Jb))}}else l=!0;else k=p.value;else j="off"!==p.value;else if(h=b.querySelector(p.value),null===h)throw'Unable to find anchor target "'+p.value+'"'}if(i.length){var w,x,y;!f&&E in g?(y=g[E],w=hb[y].styleAttr,x=hb[y].classAttr):(y=g[E]=Qb++,w=g.style.cssText,x=Cb(g)),hb[y]={element:g,styleAttr:w,classAttr:x,anchorTarget:h,keyFrames:i,smoothScrolling:j,edgeStrategy:k,emitEvents:l,lastFrameIndex:-1},Db(g,[o],[])}}}for(zb(),d=0,e=a.length;e>d;d++){var z=hb[a[d][E]];z!==c&&($(z),ab(z))}return gb},d.prototype.relativeToAbsolute=function(a,b,c){var d=e.clientHeight,f=a.getBoundingClientRect(),g=f.top,h=f.bottom-f.top;return b===D?g-=d:b===C&&(g-=d/2),c===D?g+=h:c===C&&(g+=h/2),g+=gb.getScrollTop(),0|g+.5},d.prototype.animateTo=function(a,b){b=b||{};var d=Gb(),e=gb.getScrollTop();return nb={startTop:e,topDiff:a-e,targetTop:a,duration:b.duration||x,startTime:d,endTime:d+(b.duration||x),easing:V[b.easing||w],done:b.done},nb.topDiff||(nb.done&&nb.done.call(gb,!1),nb=c),gb},d.prototype.stopAnimateTo=function(){nb&&nb.done&&nb.done.call(gb,!0),nb=c},d.prototype.isAnimatingTo=function(){return!!nb},d.prototype.isMobile=function(){return Rb},d.prototype.setScrollTop=function(b,c){return rb=c===!0,Rb?Sb=i.min(i.max(b,0),Ib):a.scrollTo(0,b),gb},d.prototype.getScrollTop=function(){return Rb?Sb:a.pageYOffset||e.scrollTop||f.scrollTop||0},d.prototype.getMaxScrollTop=function(){return Ib},d.prototype.on=function(a,b){return jb[a]=b,gb},d.prototype.off=function(a){return delete jb[a],gb},d.prototype.destroy=function(){var a=U();a(ub),xb(),Db(e,[t],[s,u,v]);for(var b=0,d=hb.length;d>b;b++)eb(hb[b].element);e.style.overflow=f.style.overflow="",e.style.height=f.style.height="",ib&&g.setStyle(ib,"transform","none"),gb=c,ib=c,jb=c,kb=c,Ib=0,Jb=1,lb=c,mb=c,Kb="down",Lb=-1,Nb=0,Ob=0,Pb=!1,nb=c,ob=c,pb=c,qb=c,rb=c,Qb=0,sb=c,Rb=!1,Sb=0,tb=c};var W=function(){var d,g,h,j,o,p,q,r,s,t,u,v;vb(e,[k,l,m,n].join(" "),function(a){var e=a.changedTouches[0];for(j=a.target;3===j.nodeType;)j=j.parentNode;switch(o=e.clientY,p=e.clientX,t=a.timeStamp,F.test(j.tagName)||a.preventDefault(),a.type){case k:d&&d.blur(),gb.stopAnimateTo(),d=j,g=q=o,h=p,s=t;break;case l:F.test(j.tagName)&&b.activeElement!==j&&a.preventDefault(),r=o-q,v=t-u,gb.setScrollTop(Sb-r,!0),q=o,u=t;break;default:case m:case n:var f=g-o,w=h-p,x=w*w+f*f;if(49>x){if(!F.test(d.tagName)){d.focus();var y=b.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,a.view,1,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),d.dispatchEvent(y)}return}d=c;var z=r/v;z=i.max(i.min(z,3),-3);var A=i.abs(z/mb),B=z*A+.5*mb*A*A,C=gb.getScrollTop()-B,D=0;C>Ib?(D=(Ib-C)/B,C=Ib):0>C&&(D=-C/B,C=0),A*=1-D,gb.animateTo(0|C+.5,{easing:"outCubic",duration:A})}}),a.scrollTo(0,0),e.style.overflow=f.style.overflow="hidden"},X=function(){var a,b,c,d,f,g,h,j,k,l,m,n=e.clientHeight,o=Ab();for(j=0,k=hb.length;k>j;j++)for(a=hb[j],b=a.element,c=a.anchorTarget,d=a.keyFrames,f=0,g=d.length;g>f;f++)h=d[f],l=h.offset,m=o[h.constant]||0,h.frame=l,h.isPercentage&&(l*=n,h.frame=l),"relative"===h.mode&&(eb(b),h.frame=gb.relativeToAbsolute(c,h.anchors[0],h.anchors[1])-l,eb(b,!0)),h.frame+=m,kb&&!h.isEnd&&h.frame>Ib&&(Ib=h.frame);for(Ib=i.max(Ib,Bb()),j=0,k=hb.length;k>j;j++){for(a=hb[j],d=a.keyFrames,f=0,g=d.length;g>f;f++)h=d[f],m=o[h.constant]||0,h.isEnd&&(h.frame=Ib-h.offset+m);a.keyFrames.sort(Hb)}},Y=function(a,b){for(var c=0,d=hb.length;d>c;c++){var e,f,i=hb[c],j=i.element,k=i.smoothScrolling?a:b,l=i.keyFrames,m=l.length,n=l[0],s=l[l.length-1],t=n.frame>k,u=k>s.frame,v=t?n:s,w=i.emitEvents,x=i.lastFrameIndex;if(t||u){if(t&&-1===i.edge||u&&1===i.edge)continue;switch(t?(Db(j,[p],[r,q]),w&&x>-1&&(yb(j,n.eventType,Kb),i.lastFrameIndex=-1)):(Db(j,[r],[p,q]),w&&m>x&&(yb(j,s.eventType,Kb),i.lastFrameIndex=m)),i.edge=t?-1:1,i.edgeStrategy){case"reset":eb(j);continue;case"ease":k=v.frame;break;default:case"set":var y=v.props;for(e in y)h.call(y,e)&&(f=db(y[e].value),0===e.indexOf("@")?j.setAttribute(e.substr(1),f):g.setStyle(j,e,f));continue}}else 0!==i.edge&&(Db(j,[o,q],[p,r]),i.edge=0);for(var z=0;m-1>z;z++)if(k>=l[z].frame&&l[z+1].frame>=k){var A=l[z],B=l[z+1];for(e in A.props)if(h.call(A.props,e)){var C=(k-A.frame)/(B.frame-A.frame);C=A.props[e].easing(C),f=cb(A.props[e].value,B.props[e].value,C),f=db(f),0===e.indexOf("@")?j.setAttribute(e.substr(1),f):g.setStyle(j,e,f)}w&&x!==z&&("down"===Kb?yb(j,A.eventType,Kb):yb(j,B.eventType,Kb),i.lastFrameIndex=z);break}}},Z=function(){Pb&&(Pb=!1,zb());var a,b,d=gb.getScrollTop(),e=Gb();if(nb)e>=nb.endTime?(d=nb.targetTop,a=nb.done,nb=c):(b=nb.easing((e-nb.startTime)/nb.duration),d=0|nb.startTop+b*nb.topDiff),gb.setScrollTop(d,!0);else if(!rb){var f=qb.targetTop-d;f&&(qb={startTop:Lb,topDiff:d-Lb,targetTop:d,startTime:Mb,endTime:Mb+pb}),qb.endTime>=e&&(b=V.sqrt((e-qb.startTime)/pb),d=0|qb.startTop+b*qb.topDiff)}if(Rb&&ib&&g.setStyle(ib,"transform","translate(0, "+-Sb+"px) "+tb),rb||Lb!==d){Kb=d>Lb?"down":Lb>d?"up":Kb,rb=!1;var h={curTop:d,lastTop:Lb,maxTop:Ib,direction:Kb},i=jb.beforerender&&jb.beforerender.call(gb,h);i!==!1&&(Y(d,gb.getScrollTop()),Lb=d,jb.render&&jb.render.call(gb,h)),a&&a.call(gb,!1)}Mb=e},$=function(a){for(var b=0,c=a.keyFrames.length;c>b;b++){for(var d,e,f,g,h=a.keyFrames[b],i={};null!==(g=I.exec(h.props));)f=g[1],e=g[2],d=f.match(J),null!==d?(f=d[1],d=d[2]):d=w,e=e.indexOf("!")?_(e):[e.slice(1)],i[f]={value:e,easing:V[d]};h.props=i}},_=function(a){var b=[];return O.lastIndex=0,a=a.replace(O,function(a){return a.replace(M,function(a){return 100*(a/255)+"%"})}),R&&(P.lastIndex=0,a=a.replace(P,function(a){return R+a})),a=a.replace(M,function(a){return b.push(+a),"{?}"}),b.unshift(a),b},ab=function(a){var b,c,d={};for(b=0,c=a.keyFrames.length;c>b;b++)bb(a.keyFrames[b],d);for(d={},b=a.keyFrames.length-1;b>=0;b--)bb(a.keyFrames[b],d)},bb=function(a,b){var c;for(c in b)h.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},cb=function(a,b,c){var d,e=a.length;if(e!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var f=[a[0]];for(d=1;e>d;d++)f[d]=a[d]+(b[d]-a[d])*c;return f},db=function(a){var b=1;return N.lastIndex=0,a[0].replace(N,function(){return a[b++]})},eb=function(a,b){a=[].concat(a);for(var c,d,e=0,f=a.length;f>e;e++)d=a[e],c=hb[d[E]],c&&(b?(d.style.cssText=c.dirtyStyleAttr,Db(d,c.dirtyClassAttr)):(c.dirtyStyleAttr=d.style.cssText,c.dirtyClassAttr=Cb(d),d.style.cssText=c.styleAttr,Db(d,c.classAttr)))},fb=function(){tb="translateZ(0)",g.setStyle(ib,"transform",tb);var a=j(ib),b=a.getPropertyValue("transform"),c=a.getPropertyValue(R+"transform"),d=b&&"none"!==b||c&&"none"!==c;d||(tb="")};g.setStyle=function(a,b,c){var d=a.style;if(b=b.replace(K,L).replace("-",""),"zIndex"===b)d[b]=isNaN(c)?c:""+(0|c);else if("float"===b)d.styleFloat=d.cssFloat=c;else try{Q&&(d[Q+b.slice(0,1).toUpperCase()+b.slice(1)]=c),d[b]=c}catch(e){}};var gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb=g.addEvent=function(b,c,d){var e=function(b){return b=b||a.event,b.target||(b.target=b.srcElement),b.preventDefault||(b.preventDefault=function(){b.returnValue=!1,b.defaultPrevented=!0}),d.call(this,b)};c=c.split(" ");for(var f,g=0,h=c.length;h>g;g++)f=c[g],b.addEventListener?b.addEventListener(f,d,!1):b.attachEvent("on"+f,e),Tb.push({element:b,name:f,listener:d})},wb=g.removeEvent=function(a,b,c){b=b.split(" ");for(var d=0,e=b.length;e>d;d++)a.removeEventListener?a.removeEventListener(b[d],c,!1):a.detachEvent("on"+b[d],c)},xb=function(){for(var a,b=0,c=Tb.length;c>b;b++)a=Tb[b],wb(a.element,a.name,a.listener);Tb=[]},yb=function(a,b,c){jb.keyframe&&jb.keyframe.call(gb,a,b,c)},zb=function(){var a=gb.getScrollTop();Ib=0,kb&&!Rb&&(f.style.height=""),X(),kb&&!Rb&&(f.style.height=Ib+e.clientHeight+"px"),Rb?gb.setScrollTop(i.min(gb.getScrollTop(),Ib)):gb.setScrollTop(a,!0),rb=!0},Ab=function(){var a,b,c=e.clientHeight,d={};for(a in lb)b=lb[a],"function"==typeof b?b=b.call(gb):/p$/.test(b)&&(b=b.slice(0,-1)/100*c),d[a]=b;return d},Bb=function(){var a=ib&&ib.offsetHeight||0,b=i.max(a,f.scrollHeight,f.offsetHeight,e.scrollHeight,e.offsetHeight,e.clientHeight);return b-e.clientHeight},Cb=function(b){var c="className";return a.SVGElement&&b instanceof a.SVGElement&&(b=b[c],c="baseVal"),b[c]},Db=function(b,d,e){var f="className";if(a.SVGElement&&b instanceof a.SVGElement&&(b=b[f],f="baseVal"),e===c)return b[f]=d,c;for(var g=b[f],h=0,i=e.length;i>h;h++)g=Fb(g).replace(Fb(e[h])," ");g=Eb(g);for(var j=0,k=d.length;k>j;j++)-1===Fb(g).indexOf(Fb(d[j]))&&(g+=" "+d[j]);b[f]=Eb(g)},Eb=function(a){return a.replace(G,"")},Fb=function(a){return" "+a+" "},Gb=Date.now||function(){return+new Date},Hb=function(a,b){return a.frame-b.frame},Ib=0,Jb=1,Kb="down",Lb=-1,Mb=Gb(),Nb=0,Ob=0,Pb=!1,Qb=0,Rb=!1,Sb=0,Tb=[];"function"==typeof define&&define.amd?define("skrollr",function(){return g}):"undefined"!=typeof module&&module.exports?module.exports=g:a.skrollr=g}(window,document);